<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DDA Line Drawing with Animation</title>
  <style>
    canvas {
      border: 1px solid #000;
    }
  </style>
</head>
<body>

<canvas id="drawCanvas" width="500" height="500"></canvas>

<script>
  let canvas = document.getElementById('drawCanvas');
  let context = canvas.getContext('2d');
  let lines = [];
  let startPoint = null;

  function drawLine(x1, y1, x2, y2, duration) {
    let steps = Math.max(Math.abs(x2 - x1), Math.abs(y2 - y1));
    let xIncrement = (x2 - x1) / steps;
    let yIncrement = (y2 - y1) / steps;
    let currentX = x1;
    let currentY = y1;

    function animateLine() {
      // Redraw all existing lines
      for (let i = 0; i < lines.length; i++) {
        let line = lines[i];
        context.beginPath();
        context.moveTo(line.startX, line.startY);
        context.lineTo(line.endX, line.endY);
        context.stroke();
      }

      // Draw the current line
      context.beginPath();
      context.moveTo(x1, y1);
      context.lineTo(currentX, currentY);
      context.stroke();

      currentX += xIncrement;
      currentY += yIncrement;

      if (Math.abs(currentX - x2) < 0.5 && Math.abs(currentY - y2) < 0.5) {
        // Draw all existing lines
        for (let i = 0; i < lines.length; i++) {
          let line = lines[i];
          context.beginPath();
          context.moveTo(line.startX, line.startY);
          context.lineTo(line.endX, line.endY);
          context.stroke();
        }

        // Draw the final line
        context.beginPath();
        context.moveTo(x1, y1);
        context.lineTo(x2, y2);
        context.stroke();

        lines.push({ startX: x1, startY: y1, endX: x2, endY: y2 });

        return;
      }

      requestAnimationFrame(animateLine);
    }

    animateLine();
  }

  function handleCanvasClick(event) {
    let rect = canvas.getBoundingClientRect();
    let x = event.clientX - rect.left;
    let y = event.clientY - rect.top;

    if (!startPoint) {
      // First click
      startPoint = { x, y };
    } else {
      // Second click
      let endPoint = { x, y };
      drawLine(startPoint.x, startPoint.y, endPoint.x, endPoint.y, 2000);
      startPoint = null; // Reset start point for next line
    }
  }

  canvas.addEventListener('click', handleCanvasClick);
</script>

</body>
</html>
